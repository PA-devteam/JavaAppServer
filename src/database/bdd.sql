;             
CREATE USER IF NOT EXISTS SA SALT 'a2545d4cffd87479' HASH '90dd2bb8e2613d828565e2713d8fca9b58180e294d8c87d8e18467c8b5d66fe9' ADMIN;           
CREATE SCHEMA IF NOT EXISTS PA AUTHORIZATION SA;              
DROP TABLE IF EXISTS PA.AUTHORISATION CASCADE;
DROP TABLE IF EXISTS PA.PASSWORD CASCADE;     
DROP TABLE IF EXISTS PA.ROLESTATUT CASCADE;   
DROP TABLE IF EXISTS PA.AUTHORISATIONROLE CASCADE;            
DROP TABLE IF EXISTS PA.EQUATION CASCADE;     
DROP TABLE IF EXISTS PA.USERS CASCADE;        
DROP TABLE IF EXISTS PA.USERROLE CASCADE;     
DROP TABLE IF EXISTS PA.COMMENTARY CASCADE;   
DROP TABLE IF EXISTS PA.ELEMENT CASCADE;      
DROP TABLE IF EXISTS PA.EQUATIONELEMENT CASCADE;              
DROP TABLE IF EXISTS PA.RULE CASCADE;         
DROP TABLE IF EXISTS PA.RULEELEMENT CASCADE;  
DROP TABLE IF EXISTS PA.ELMTOPERATOR CASCADE; 
DROP TABLE IF EXISTS PA.ELMTVARIABLE CASCADE; 
DROP TABLE IF EXISTS PA.EQUATIONRULES CASCADE;
CREATE SEQUENCE PA.SYSTEM_SEQUENCE_C6CE7FF7_5BDE_4AFD_9D3E_F76618D5CC98 START WITH 1 BELONGS_TO_TABLE;        
CREATE SEQUENCE PA.SYSTEM_SEQUENCE_30BD38A8_4CA7_4746_AABD_B8ACEBF1401D START WITH 1 BELONGS_TO_TABLE;        
CREATE SEQUENCE PA.SYSTEM_SEQUENCE_F550651E_CC15_417F_BB65_8CD03619FF01 START WITH 1 BELONGS_TO_TABLE;        
CREATE SEQUENCE PA.SYSTEM_SEQUENCE_08F67F2E_1979_4476_8A3D_7EC7A7066FAC START WITH 1 BELONGS_TO_TABLE;        
CREATE SEQUENCE PA.SYSTEM_SEQUENCE_7C94D452_D3BB_4106_A20D_C05CBC449EEC START WITH 3 BELONGS_TO_TABLE;        
CREATE SEQUENCE PA.SYSTEM_SEQUENCE_94F7EA38_9DD2_4985_856D_F46997F1A2D6 START WITH 3 BELONGS_TO_TABLE;        
CREATE SEQUENCE PA.SYSTEM_SEQUENCE_553ABA03_A637_4C57_8285_C40683898BB6 START WITH 3 BELONGS_TO_TABLE;        
CREATE SEQUENCE PA.SYSTEM_SEQUENCE_C7138997_5887_4B2C_AA78_E496670E6E2F START WITH 1 BELONGS_TO_TABLE;        
CREATE SEQUENCE PA.SYSTEM_SEQUENCE_5886AAFF_7670_48BA_A7C0_E0D4ED71872E START WITH 1 BELONGS_TO_TABLE;        
CREATE CACHED TABLE PA.AUTHORISATION(
    ID INT DEFAULT (NEXT VALUE FOR PA.SYSTEM_SEQUENCE_5886AAFF_7670_48BA_A7C0_E0D4ED71872E) NOT NULL NULL_TO_DEFAULT SEQUENCE PA.SYSTEM_SEQUENCE_5886AAFF_7670_48BA_A7C0_E0D4ED71872E,
    LABEL TEXT,
    VAL BOOL
);              
ALTER TABLE PA.AUTHORISATION ADD CONSTRAINT PA.CONSTRAINT_5 PRIMARY KEY(ID);  
-- 0 +/- SELECT COUNT(*) FROM PA.AUTHORISATION;               
CREATE CACHED TABLE PA.PASSWORD(
    ID INT DEFAULT (NEXT VALUE FOR PA.SYSTEM_SEQUENCE_7C94D452_D3BB_4106_A20D_C05CBC449EEC) NOT NULL NULL_TO_DEFAULT SEQUENCE PA.SYSTEM_SEQUENCE_7C94D452_D3BB_4106_A20D_C05CBC449EEC,
    VAL TEXT
);    
ALTER TABLE PA.PASSWORD ADD CONSTRAINT PA.CONSTRAINT_7 PRIMARY KEY(ID);       
-- 2 +/- SELECT COUNT(*) FROM PA.PASSWORD;    
INSERT INTO PA.PASSWORD(ID, VAL) VALUES
(1, 'azerty'),
(2, 'aze');          
CREATE CACHED TABLE PA.ROLESTATUT(
    ID INT DEFAULT (NEXT VALUE FOR PA.SYSTEM_SEQUENCE_94F7EA38_9DD2_4985_856D_F46997F1A2D6) NOT NULL NULL_TO_DEFAULT SEQUENCE PA.SYSTEM_SEQUENCE_94F7EA38_9DD2_4985_856D_F46997F1A2D6,
    LABEL TEXT
);
ALTER TABLE PA.ROLESTATUT ADD CONSTRAINT PA.CONSTRAINT_A PRIMARY KEY(ID);     
-- 2 +/- SELECT COUNT(*) FROM PA.ROLESTATUT;  
INSERT INTO PA.ROLESTATUT(ID, LABEL) VALUES
(1, 'Legislator'),
(2, 'Prescriber');           
CREATE CACHED TABLE PA.AUTHORISATIONROLE(
    ID INT,
    AUT_ID INT
);    
-- 0 +/- SELECT COUNT(*) FROM PA.AUTHORISATIONROLE;           
CREATE CACHED TABLE PA.EQUATION(
    ID INT DEFAULT (NEXT VALUE FOR PA.SYSTEM_SEQUENCE_30BD38A8_4CA7_4746_AABD_B8ACEBF1401D) NOT NULL NULL_TO_DEFAULT SEQUENCE PA.SYSTEM_SEQUENCE_30BD38A8_4CA7_4746_AABD_B8ACEBF1401D,
    LABEL TEXT,
    DESCRIPTION TEXT,
    ISVALID BOOL,
    VALIDATEDBY INT,
    VALIDATIONDATE DATE,
    CREATEDBY INT
);    
ALTER TABLE PA.EQUATION ADD CONSTRAINT PA.CONSTRAINT_51 PRIMARY KEY(ID);      
-- 0 +/- SELECT COUNT(*) FROM PA.EQUATION;    
CREATE CACHED TABLE PA.USERS(
    ID INT DEFAULT (NEXT VALUE FOR PA.SYSTEM_SEQUENCE_553ABA03_A637_4C57_8285_C40683898BB6) NOT NULL NULL_TO_DEFAULT SEQUENCE PA.SYSTEM_SEQUENCE_553ABA03_A637_4C57_8285_C40683898BB6,
    FIRSTNAME VARCHAR(25) NOT NULL,
    LASTNAME VARCHAR(25) NOT NULL,
    USERNAME VARCHAR(25) NOT NULL,
    CREATEDATE DATE,
    UPDATEDATE DATE,
    ISACTIVE BOOL,
    ISDELETED BOOL,
    ID_PASSWORD INT,
    EMAIL TEXT
);             
ALTER TABLE PA.USERS ADD CONSTRAINT PA.CONSTRAINT_4 PRIMARY KEY(ID, USERNAME);
-- 2 +/- SELECT COUNT(*) FROM PA.USERS;       
INSERT INTO PA.USERS(ID, FIRSTNAME, LASTNAME, USERNAME, CREATEDATE, UPDATEDATE, ISACTIVE, ISDELETED, ID_PASSWORD, EMAIL) VALUES
(1, 'Romain', 'S', 'rs', DATE '2016-05-24', DATE '2016-05-24', TRUE, FALSE, 1, 'romain.a'),
(2, 'fdgh', 'fghgf', 'hfgf', DATE '2016-05-24', DATE '2016-05-24', TRUE, FALSE, 2, 'hfhg');     
CREATE CACHED TABLE PA.USERROLE(
    ID INT NOT NULL,
    ROL_ID INT
);    
ALTER TABLE PA.USERROLE ADD CONSTRAINT PA.CONSTRAINT_58 PRIMARY KEY(ID);      
-- 0 +/- SELECT COUNT(*) FROM PA.USERROLE;    
CREATE CACHED TABLE PA.COMMENTARY(
    ID INT NOT NULL,
    EQU_ID INT,
    COMMENTARY TEXT,
    COMMENTDATE DATE
);     
ALTER TABLE PA.COMMENTARY ADD CONSTRAINT PA.CONSTRAINT_59 PRIMARY KEY(ID);    
-- 0 +/- SELECT COUNT(*) FROM PA.COMMENTARY;  
CREATE CACHED TABLE PA.ELEMENT(
    ID INT DEFAULT (NEXT VALUE FOR PA.SYSTEM_SEQUENCE_C6CE7FF7_5BDE_4AFD_9D3E_F76618D5CC98) NOT NULL NULL_TO_DEFAULT SEQUENCE PA.SYSTEM_SEQUENCE_C6CE7FF7_5BDE_4AFD_9D3E_F76618D5CC98,
    LABEL TEXT,
    DESCRIPTION TEXT
);            
ALTER TABLE PA.ELEMENT ADD CONSTRAINT PA.CONSTRAINT_C PRIMARY KEY(ID);        
-- 0 +/- SELECT COUNT(*) FROM PA.ELEMENT;     
CREATE CACHED TABLE PA.EQUATIONELEMENT(
    ID INT NOT NULL,
    ELE_ID INT
);             
-- 0 +/- SELECT COUNT(*) FROM PA.EQUATIONELEMENT;             
CREATE CACHED TABLE PA.RULE(
    ID INT DEFAULT (NEXT VALUE FOR PA.SYSTEM_SEQUENCE_F550651E_CC15_417F_BB65_8CD03619FF01) NOT NULL NULL_TO_DEFAULT SEQUENCE PA.SYSTEM_SEQUENCE_F550651E_CC15_417F_BB65_8CD03619FF01,
    LABEL TEXT
);      
ALTER TABLE PA.RULE ADD CONSTRAINT PA.CONSTRAINT_2 PRIMARY KEY(ID);           
-- 0 +/- SELECT COUNT(*) FROM PA.RULE;        
CREATE CACHED TABLE PA.RULEELEMENT(
    ID INT NOT NULL,
    ELE_ID INT,
    VAL TEXT
);  
-- 0 +/- SELECT COUNT(*) FROM PA.RULEELEMENT; 
CREATE CACHED TABLE PA.ELMTOPERATOR(
    ID INT DEFAULT (NEXT VALUE FOR PA.SYSTEM_SEQUENCE_08F67F2E_1979_4476_8A3D_7EC7A7066FAC) NOT NULL NULL_TO_DEFAULT SEQUENCE PA.SYSTEM_SEQUENCE_08F67F2E_1979_4476_8A3D_7EC7A7066FAC
);               
-- 0 +/- SELECT COUNT(*) FROM PA.ELMTOPERATOR;
CREATE CACHED TABLE PA.ELMTVARIABLE(
    ID INT DEFAULT (NEXT VALUE FOR PA.SYSTEM_SEQUENCE_C7138997_5887_4B2C_AA78_E496670E6E2F) NOT NULL NULL_TO_DEFAULT SEQUENCE PA.SYSTEM_SEQUENCE_C7138997_5887_4B2C_AA78_E496670E6E2F,
    VAL TEXT
);
-- 0 +/- SELECT COUNT(*) FROM PA.ELMTVARIABLE;
CREATE CACHED TABLE PA.EQUATIONRULES(
    ID INT NOT NULL,
    RUL_ID INT
);               
-- 0 +/- SELECT COUNT(*) FROM PA.EQUATIONRULES;               
ALTER TABLE PA.EQUATION ADD CONSTRAINT PA.CONSTRAINT_5151 FOREIGN KEY(CREATEDBY) REFERENCES PA.USERS(ID) NOCHECK;             
ALTER TABLE PA.EQUATIONRULES ADD CONSTRAINT PA.CONSTRAINT_5196 FOREIGN KEY(RUL_ID) REFERENCES PA.RULE(ID) NOCHECK;            
ALTER TABLE PA.EQUATIONRULES ADD CONSTRAINT PA.CONSTRAINT_519 FOREIGN KEY(ID) REFERENCES PA.EQUATION(ID) NOCHECK;             
ALTER TABLE PA.EQUATION ADD CONSTRAINT PA.CONSTRAINT_515 FOREIGN KEY(VALIDATEDBY) REFERENCES PA.EQUATION(ID) NOCHECK;         
ALTER TABLE PA.EQUATIONELEMENT ADD CONSTRAINT PA.CONSTRAINT_88 FOREIGN KEY(ELE_ID) REFERENCES PA.ELEMENT(ID) NOCHECK;         
ALTER TABLE PA.AUTHORISATIONROLE ADD CONSTRAINT PA.CONSTRAINT_797 FOREIGN KEY(ID) REFERENCES PA.ROLESTATUT(ID) NOCHECK;       
ALTER TABLE PA.EQUATIONELEMENT ADD CONSTRAINT PA.CONSTRAINT_8 FOREIGN KEY(ID) REFERENCES PA.EQUATION(ID) NOCHECK;             
ALTER TABLE PA.RULEELEMENT ADD CONSTRAINT PA.CONSTRAINT_9 FOREIGN KEY(ID) REFERENCES PA.RULE(ID) NOCHECK;     
ALTER TABLE PA.COMMENTARY ADD CONSTRAINT PA.CONSTRAINT_52 FOREIGN KEY(ID) REFERENCES PA.USERS(ID) NOCHECK;    
ALTER TABLE PA.USERROLE ADD CONSTRAINT PA.CONSTRAINT_1 FOREIGN KEY(ID) REFERENCES PA.USERS(ID) NOCHECK;       
ALTER TABLE PA.ELMTVARIABLE ADD CONSTRAINT PA.CONSTRAINT_4B FOREIGN KEY(ID) REFERENCES PA.ELEMENT(ID) NOCHECK;
ALTER TABLE PA.USERS ADD CONSTRAINT PA.CONSTRAINT_4D FOREIGN KEY(ID_PASSWORD) REFERENCES PA.PASSWORD(ID) NOCHECK;             
ALTER TABLE PA.COMMENTARY ADD CONSTRAINT PA.CONSTRAINT_528 FOREIGN KEY(EQU_ID) REFERENCES PA.EQUATION(ID) NOCHECK;            
ALTER TABLE PA.ELMTOPERATOR ADD CONSTRAINT PA.CONSTRAINT_78 FOREIGN KEY(ID) REFERENCES PA.ELEMENT(ID) NOCHECK;
ALTER TABLE PA.RULEELEMENT ADD CONSTRAINT PA.CONSTRAINT_99 FOREIGN KEY(ELE_ID) REFERENCES PA.ELEMENT(ID) NOCHECK;             
ALTER TABLE PA.AUTHORISATIONROLE ADD CONSTRAINT PA.CONSTRAINT_79 FOREIGN KEY(AUT_ID) REFERENCES PA.AUTHORISATION(ID) NOCHECK; 
ALTER TABLE PA.USERROLE ADD CONSTRAINT PA.CONSTRAINT_1E FOREIGN KEY(ROL_ID) REFERENCES PA.ROLESTATUT(ID) NOCHECK;             
